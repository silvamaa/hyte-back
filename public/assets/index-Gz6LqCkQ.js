import"./modulepreload-polyfill-9p4a8sJU.js";/* empty css              */document.getElementById("signupButton").addEventListener("click",()=>{document.getElementById("signupForm").style.display="block",document.getElementById("loginForm").style.display="none"});document.getElementById("loginButton").addEventListener("click",()=>{document.getElementById("loginForm").style.display="block",document.getElementById("signupForm").style.display="none"});const p=document.querySelector(".createuser");p.addEventListener("click",async a=>{a.preventDefault(),console.log("Creating user");const l="http://127.0.0.1:3001/api/users",e=document.querySelector(".create_user_form"),n=e.querySelector("input[name=username]").value,r=e.querySelector("input[name=password]").value,t={username:n,password:r,email:e.querySelector("input[name=email]").value},s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)};try{const o=await fetch(l,s),c=await o.json();if(o.ok){localStorage.setItem("token",c.token),alert("User created successfully!");const u={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:r})},i=await fetch("http://127.0.0.1:3001/api/auth/login",u),d=await i.json();if(i.ok)localStorage.setItem("token",d.token),alert("Logged in successfully!"),window.location.href="start-api-harjoituspohja.html";else throw new Error(`HTTP error! status: ${i.status}`)}else throw new Error(`HTTP error! status: ${o.status}`)}catch(o){console.error("Error creating user:",o),alert("Failed to create user. Please try again.")}});const m=document.querySelector(".loginuser");m.addEventListener("click",async a=>{a.preventDefault(),console.log("Logging in user");const l="http://localhost:3001/api/auth/login",e=document.querySelector(".login_form"),n={username:e.querySelector("input[name=username]").value,password:e.querySelector("input[name=password]").value},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)};try{const t=await fetch(l,r),s=await t.json();t.ok?(localStorage.setItem("token",s.token),window.location.href="start-api-harjoituspohja.html"):(console.error("Login failed:",s.error),alert("Unauthorized: username or password incorrect!"))}catch(t){console.error("Error logging in:",t),alert("Error logging in. Please try again later.")}});
